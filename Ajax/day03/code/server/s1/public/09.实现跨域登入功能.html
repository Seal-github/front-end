<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form action="" id="loginform">
        <div class="form-group">
            <label for="">用户名</label>
            <input type="text" class="form-control" name="username"
            placeholder="请输入用户名">
        </div>
        <div class="form-group">
            <label for="">密码</label>
            <input type="password" class="form-control" name="password"
            placeholder="请输入密码">
        </div>
        <input type="button" class="btn btn-default" value="登入" 
        id="loginbtn">
        <input type="button" class="btn btn-default" value="检测用户登入状态" 
        id="checkbtn">
    </form>
    <script>
        // 获取登入按钮
        let loginbtn = document.querySelector('#loginbtn');
        // 获取检测按钮
        let checkbtn = document.querySelector('#checkbtn');
        // 获取表单
        let loginform = document.querySelector('#loginform');
        loginbtn.addEventListener('click',function(){
            // 将html表单转换为FormData表单
            let form = new FormData(loginform);
            let xhr = new XMLHttpRequest();
            xhr.open('post','http://localhost:3001/login');
            // 当跨域请求时携带cookie信息
            xhr.withCredentials = true;
            xhr.send(form);
            xhr.onload = function(){
                console.log(xhr.responseText);
            }
        })
        checkbtn.addEventListener('click',function(){
            let xhr = new XMLHttpRequest();
            xhr.open('get','http://localhost:3001/check');
            // 当跨域请求时携带cookie信息
            xhr.withCredentials = true;
            xhr.send();
            xhr.onload = function(){
                console.log(xhr.responseText);
            }
        })

    </script>
</body>
</html>